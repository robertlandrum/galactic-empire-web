voidDo_Fortify(short tp,short tr,short tc,short ships,short fown){Str255	infostr/*,t*/;Rect	r,iconrect;WindowPtr	prtwind,sp;Point		woff/*,tip*/;long		crap;//OSErr		err;HMMessageRecord	hm = {0};GetPort(&sp);/*	Calc the window position */woff.h = woff.v = 0;SetPort(gamewind);LocalToGlobal(&woff);r.top = (tr * PLANETLENGTH) + 4 + woff.v;r.bottom = r.top + 52;if(r.bottom > ((gamerect.bottom-5) + woff.v))	{	r.bottom = (gamerect.bottom-5) + woff.v;	r.top = r.bottom - 52;	}if(r.top < (gamerect.top + woff.v))	{	r.top = woff.v + gamerect.top;	r.bottom = r.top + 52;	}if(tc > (PLANETCOLS/2))	{	r.right = ((tc * PLANETWIDTH) - 16) + woff.h;	r.left = (r.right - 220); 	}else	{	r.left = ((tc * PLANETWIDTH) + 32) + woff.h;	r.right = (r.left + 220);	}	/* Save the area behind the window before display */InsetRect(&r,-10,-10);Save_Bits(&r);	InsetRect(&r,10,10);/*	Generate the info string */NumToString((long)ships,infostr);switch(fown)	{	case HUMAN:		{pStrCat("\p Human",infostr);break;}	case GUBRU:		{pStrCat("\p Gubru",infostr);break;}	case CZIN:		{pStrCat("\p Czin",infostr);break;}	case BLOBS:		{pStrCat("\p Blob",infostr);break;}	case BOTS:		{pStrCat("\p Bot",infostr);break;}	case ARACHS:	{pStrCat("\p Arach",infostr);break;}	case MUTANTS:	{pStrCat("\p Mutant",infostr);break;}	case NUKES:		{pStrCat("\p Nuke",infostr);break;}	case BOZOS:		{pStrCat("\p Bozo",infostr);break;}	}if(ships > 1)	pStrCat("\p Ships fortify",infostr);else	pStrCat("\p Ship fortifies",infostr);#ifdef XXXXhm.hmmHelpType  = khmmString;pStrCat(infostr,hm.u.hmmString);tip.v = (((precs[tp].row * PLANETLENGTH) + 1) & 0xFFF0) + 8;tip.h = (((precs[tp].col * PLANETWIDTH) + 1) & 0xFFF0) + 8;HMSetBalloons(true);err = HMShowBalloon(&hm, tip, &r, nil, kBalloonWDEFID, kHMWindListResType,kHMSaveBitsWindow);if(err)	{	t[0] = sprintf((char *)&t[1],"HMShowBalloon err = %d",err);	DebugStr(t);	}Delay(120L,&crap);HMRemoveBalloon();HMSetBalloons(false);#endifprtwind = NewWindow( 0L, &r, "\p", 1, 1, (WindowPtr)-1L, 0, 0L );SetPort( prtwind );TextFont(0);TextSize(12);SetRect(&iconrect,10,10,42,42);PlotCIcon(&iconrect,planetIcons[fown]);MoveTo(52,30);DrawString(infostr);if(fastbattles)	Delay(60L,&crap);else	Delay(120L,&crap);DisposeWindow(prtwind);Restore_Bits();SetPort(sp);precs[tp].ships += ships;}